{"version":3,"sources":["../../src/components/CustomNav/index.tsx","../../src/utils/sortGroups.ts","../../src/defaults.ts","../../src/plugin/index.ts"],"sourcesContent":["import type { EntityToGroup, NavGroupType } from '@payloadcms/ui/shared'\nimport type { PayloadRequest, ServerProps } from 'payload'\n\nimport { Logout } from '@payloadcms/ui'\nimport { RenderServerComponent } from '@payloadcms/ui/elements/RenderServerComponent'\nimport { EntityType, groupNavItems } from '@payloadcms/ui/shared'\nimport { getTranslation } from '@payloadcms/translations'\nimport React from 'react'\n\n// Import client component using package path to ensure proper bundling\n// This path will be resolved by the consuming bundler (Next.js)\nimport { CustomNavClient } from 'payload-sidebar-plugin/components'\nimport { sortGroups } from '../../utils/sortGroups'\nimport { DEFAULT_GROUP_ORDER, DEFAULT_BADGE_COLORS } from '../../defaults'\nimport { getPluginOptions, type SerializableCustomLink } from '../../plugin/index'\nimport type { NavEntity, NavGroup, CustomGroup } from '../../types'\n\nexport type CustomNavProps = {\n  req?: PayloadRequest\n} & ServerProps\n\nasync function getNavPrefs(\n  req?: PayloadRequest,\n): Promise<{ groups?: Record<string, { open?: boolean }> } | null> {\n  if (!req?.user) return null\n\n  try {\n    const preferences = await req.payload.find({\n      collection: 'payload-preferences',\n      where: {\n        key: { equals: 'nav' },\n        'user.relationTo': { equals: 'users' },\n        'user.value': { equals: req.user.id },\n      },\n      limit: 1,\n      depth: 0,\n    })\n\n    return (preferences.docs[0]?.value as { groups?: Record<string, { open?: boolean }> }) || null\n  } catch {\n    return null\n  }\n}\n\n/**\n * Convert SerializableCustomLink to NavEntity\n */\nfunction customLinkToNavEntity(link: SerializableCustomLink): NavEntity {\n  // Generate a unique slug for custom links\n  const slug = `custom-${link.label.toLowerCase().replace(/\\s+/g, '-')}`\n\n  // Auto-detect external links\n  const isExternal = link.external ?? (\n    link.href.startsWith('http://') ||\n    link.href.startsWith('https://') ||\n    link.href.startsWith('//')\n  )\n\n  return {\n    slug,\n    type: 'custom',\n    label: link.label,\n    href: link.href,\n    external: isExternal,\n    icon: link.icon, // Now a string key\n    pinnable: link.pinnable ?? true,\n    order: link.order ?? 50,\n  }\n}\n\n/**\n * Merge custom links into navigation groups\n * Supports i18n via group aliases\n */\nfunction mergeCustomLinks(\n  groups: NavGroup[],\n  customLinks: SerializableCustomLink[] = [],\n  customGroups: CustomGroup[] = [],\n): NavGroup[] {\n  if (!customLinks.length && !customGroups.length) {\n    return groups\n  }\n\n  // Build alias map: alias -> primary label\n  const aliasMap = new Map<string, string>()\n  for (const customGroup of customGroups) {\n    // Map the group's own label to itself\n    aliasMap.set(customGroup.label, customGroup.label)\n    // Map all aliases to the primary label\n    if (customGroup.aliases) {\n      for (const alias of customGroup.aliases) {\n        aliasMap.set(alias, customGroup.label)\n      }\n    }\n  }\n\n  // Create a mutable copy of groups\n  const mergedGroups = groups.map(g => ({\n    ...g,\n    entities: [...g.entities],\n  }))\n\n  // Track existing group labels (use primary label via alias map)\n  const groupMap = new Map<string, NavGroup>()\n  mergedGroups.forEach(g => {\n    const primaryLabel = aliasMap.get(g.label) || g.label\n    if (!groupMap.has(primaryLabel)) {\n      groupMap.set(primaryLabel, g)\n    }\n  })\n\n  // Create custom groups first (if they don't exist)\n  for (const customGroup of customGroups) {\n    if (!groupMap.has(customGroup.label)) {\n      const newGroup: NavGroup = {\n        label: customGroup.label,\n        entities: [],\n      }\n      mergedGroups.push(newGroup)\n      groupMap.set(customGroup.label, newGroup)\n    }\n  }\n\n  // Add custom links to their respective groups (using alias resolution)\n  for (const link of customLinks) {\n    const linkGroupLabel = link.group ?? 'Custom'\n    // Resolve to primary group label if it's an alias\n    const primaryGroupLabel = aliasMap.get(linkGroupLabel) || linkGroupLabel\n    const navEntity = customLinkToNavEntity(link)\n\n    let targetGroup = groupMap.get(primaryGroupLabel)\n\n    // Create group if it doesn't exist\n    if (!targetGroup) {\n      targetGroup = {\n        label: primaryGroupLabel,\n        entities: [],\n      }\n      mergedGroups.push(targetGroup)\n      groupMap.set(primaryGroupLabel, targetGroup)\n    }\n\n    targetGroup.entities.push(navEntity)\n  }\n\n  // Sort entities within each group by order\n  for (const group of mergedGroups) {\n    group.entities.sort((a, b) => {\n      const orderA = a.order ?? 50\n      const orderB = b.order ?? 50\n      return orderA - orderB\n    })\n  }\n\n  // Remove empty groups that are just aliases (not the primary)\n  const primaryLabels = new Set(customGroups.map(g => g.label))\n  const filteredGroups = mergedGroups.filter(group => {\n    // Keep groups that have entities\n    if (group.entities.length > 0) return true\n    // Keep groups that are primary labels\n    if (primaryLabels.has(group.label)) return true\n    // Keep groups that are NOT aliases of something else\n    const primaryLabel = aliasMap.get(group.label)\n    if (!primaryLabel || primaryLabel === group.label) return true\n    // Filter out empty alias groups\n    return false\n  })\n\n  return filteredGroups\n}\n\n/**\n * Build group order including custom groups\n */\nfunction buildGroupOrder(\n  defaultOrder: Record<string, number>,\n  pluginOrder: Record<string, number> = {},\n  customGroups: CustomGroup[] = [],\n): Record<string, number> {\n  const order = { ...defaultOrder, ...pluginOrder }\n\n  // Apply custom group orders\n  for (const group of customGroups) {\n    if (group.order !== undefined) {\n      order[group.label] = group.order\n    }\n  }\n\n  return order\n}\n\nexport async function CustomNav(props: CustomNavProps): Promise<React.ReactElement | null> {\n  const {\n    documentSubViewType,\n    i18n,\n    locale,\n    params,\n    payload,\n    permissions,\n    req,\n    searchParams,\n    user,\n    viewType,\n    visibleEntities,\n  } = props\n\n  if (!payload?.config) {\n    return null\n  }\n\n  // Get plugin options from config.custom (serialized by plugin)\n  // Cast to Config since SanitizedConfig extends it\n  const pluginOptions = getPluginOptions(payload.config as unknown as import('payload').Config)\n\n  // Merge plugin options with defaults\n  const groupOrder = buildGroupOrder(\n    DEFAULT_GROUP_ORDER,\n    pluginOptions.groupOrder,\n    pluginOptions.customGroups\n  )\n  const classPrefix = pluginOptions.classPrefix ?? 'nav'\n  const enablePinning = pluginOptions.enablePinning ?? true\n  const pinnedStorage = pluginOptions.pinnedStorage ?? 'preferences'\n  const cssVariables = { ...DEFAULT_BADGE_COLORS, ...pluginOptions.cssVariables }\n  const customLinks = pluginOptions.customLinks ?? []\n  const customGroups = pluginOptions.customGroups ?? []\n  const icons = pluginOptions.icons ?? {}\n\n  const {\n    admin: {\n      components: { afterNavLinks, beforeNavLinks, logout },\n    },\n    routes: { admin: adminRoute },\n    collections,\n    globals,\n  } = payload.config\n\n  // Group nav items\n  const groups = groupNavItems(\n    [\n      ...collections\n        .filter(({ slug }) => visibleEntities?.collections?.includes(slug))\n        .map(\n          (collection) =>\n            ({\n              type: EntityType.collection,\n              entity: collection,\n            }) satisfies EntityToGroup,\n        ),\n      ...globals\n        .filter(({ slug }) => visibleEntities?.globals?.includes(slug))\n        .map(\n          (global) =>\n            ({\n              type: EntityType.global,\n              entity: global,\n            }) satisfies EntityToGroup,\n        ),\n    ],\n    permissions!,\n    i18n,\n  )\n\n  // Convert to serializable format\n  const payloadGroups: NavGroup[] = groups.map((g) => ({\n    label: g.label,\n    entities: g.entities.map((e) => ({\n      slug: e.slug,\n      type: e.type === EntityType.collection ? ('collection' as const) : ('global' as const),\n      label: typeof e.label === 'string' ? e.label : getTranslation(e.label, i18n),\n    })),\n  }))\n\n  // Merge custom links into groups\n  const mergedGroups = mergeCustomLinks(payloadGroups, customLinks, customGroups)\n\n  // Sort groups according to our priority\n  const sortedGroups = sortGroups(mergedGroups, groupOrder)\n\n  const navPreferences = await getNavPrefs(req)\n\n  // Serializable config for client components (no functions, no React components)\n  const navConfig = {\n    classPrefix,\n    enablePinning,\n    pinnedStorage,\n    cssVariables,\n    customLinks,\n    icons,\n  }\n\n  const LogoutComponent = RenderServerComponent({\n    clientProps: {\n      documentSubViewType,\n      viewType,\n    },\n    Component: logout?.Button,\n    Fallback: Logout,\n    importMap: payload.importMap,\n    serverProps: {\n      i18n,\n      locale,\n      params,\n      payload,\n      permissions,\n      searchParams,\n      user,\n    },\n  })\n\n  const BeforeNavLinksComponent = RenderServerComponent({\n    clientProps: {\n      documentSubViewType,\n      viewType,\n    },\n    Component: beforeNavLinks,\n    importMap: payload.importMap,\n    serverProps: {\n      i18n,\n      locale,\n      params,\n      payload,\n      permissions,\n      searchParams,\n      user,\n    },\n  })\n\n  const AfterNavLinksComponent = RenderServerComponent({\n    clientProps: {\n      documentSubViewType,\n      viewType,\n    },\n    Component: afterNavLinks,\n    importMap: payload.importMap,\n    serverProps: {\n      i18n,\n      locale,\n      params,\n      payload,\n      permissions,\n      searchParams,\n      user,\n    },\n  })\n\n  return (\n    <CustomNavClient\n      classPrefix={classPrefix}\n      groups={sortedGroups}\n      adminRoute={adminRoute}\n      navPreferences={navPreferences}\n      navConfig={navConfig}\n      beforeNavLinks={BeforeNavLinksComponent as React.ReactElement}\n      afterNavLinks={AfterNavLinksComponent as React.ReactElement}\n      logoutComponent={LogoutComponent as React.ReactElement}\n    />\n  )\n}\n\nexport default CustomNav\n","import type { NavGroup } from '../types'\n\n/**\n * Sort navigation groups according to priority order\n *\n * @param groups - Array of navigation groups to sort\n * @param groupOrder - Map of group labels to priority numbers (lower = higher priority)\n * @returns Sorted array of groups\n */\nexport function sortGroups(groups: NavGroup[], groupOrder: Record<string, number>): NavGroup[] {\n  return [...groups].sort((a, b) => {\n    const orderA = groupOrder[a.label] ?? 50\n    const orderB = groupOrder[b.label] ?? 50\n    return orderA - orderB\n  })\n}\n","// ============================================================================\n// Default Group Order\n// ============================================================================\n\n/**\n * Default group ordering priority\n * Lower number = higher priority (appears first)\n */\nexport const DEFAULT_GROUP_ORDER: Record<string, number> = {\n  // Vietnamese\n  'Nội dung': 1,\n  'Người dùng': 2,\n  'Bố cục': 3,\n  'Cài đặt': 4,\n  'Chat & AI': 5,\n  CRM: 6,\n  'Giao diện': 7,\n  'Công cụ': 8,\n  'Nâng cao': 99, // Always last\n\n  // English\n  Content: 1,\n  Users: 2,\n  Layout: 3,\n  Settings: 4,\n  Appearance: 7,\n  Tools: 8,\n  Advanced: 99, // Always last\n\n  // Default Payload groups\n  collections: 1,\n  globals: 2,\n}\n\n// ============================================================================\n// Default Icons (using Lucide icon names in kebab-case)\n// ============================================================================\n\n/**\n * Default icon name mapping for common collections and globals\n * Uses Lucide icon names: https://lucide.dev/icons\n */\nexport const DEFAULT_ICONS: Record<string, string> = {\n  // ===== DASHBOARD =====\n  dashboard: 'layout-dashboard',\n\n  // ===== COLLECTIONS =====\n\n  // Content\n  pages: 'file-text',\n  posts: 'newspaper',\n  media: 'image',\n  files: 'file',\n  categories: 'folder-open',\n  tags: 'tag',\n  badges: 'award',\n\n  // Users\n  users: 'users',\n\n  // Chat & Messages\n  chats: 'message-square',\n  messages: 'send',\n  'knowledge-base': 'book-open',\n\n  // Comments\n  comments: 'message-circle',\n\n  // CRM\n  contacts: 'contact',\n  'contact-fields': 'database',\n  'contact-notes': 'sticky-note',\n  leads: 'target',\n  deals: 'briefcase',\n  tickets: 'ticket',\n  activities: 'activity',\n  'customer-feedback': 'thumbs-up',\n  'customer-interests': 'heart',\n\n  // ===== GLOBALS =====\n\n  // Layout\n  header: 'menu',\n  footer: 'layout-template',\n\n  // Analytics & Dashboard\n  'analytics-settings': 'bar-chart-3',\n  'chat-dashboard': 'layout-dashboard',\n  'crm-dashboard': 'layout-dashboard',\n  'comments-dashboard': 'layout-dashboard',\n\n  // Settings\n  settings: 'settings',\n  'chat-config': 'message-square',\n  'ai-config': 'bot',\n  'posts-page-settings': 'newspaper',\n\n  // Appearance\n  'theme-settings': 'palette',\n\n  // Tools\n  'wordpress-import': 'file-down',\n  'company-info': 'building-2',\n  'image-optimizer': 'image-plus',\n  'floating-action-button': 'mouse-pointer-click',\n\n  // Search & Navigation\n  search: 'search',\n  redirects: 'arrow-right-left',\n\n  // Form\n  'form-submissions': 'database',\n\n  // Advanced / Fallback\n  advanced: 'wrench',\n\n  // ===== CUSTOM LINKS =====\n  // Default icons for custom links\n  link: 'link',\n  'external-link': 'external-link',\n  external: 'external-link',\n  globe: 'globe',\n  sparkles: 'sparkles',\n  zap: 'zap',\n  star: 'star',\n  folder: 'folder',\n  'file-code': 'file-code',\n  terminal: 'terminal',\n  help: 'help-circle',\n  info: 'info',\n  docs: 'book-marked',\n  documentation: 'book-marked',\n  api: 'terminal',\n  custom: 'sparkles',\n\n  // Common social/dev icons\n  github: 'github',\n  rocket: 'rocket',\n  chart: 'bar-chart-3',\n  book: 'book-open',\n}\n\n// ============================================================================\n// Badge Color CSS Variables\n// ============================================================================\n\n/**\n * Default CSS variables for badge colors\n */\nexport const DEFAULT_BADGE_COLORS: Record<string, string> = {\n  '--badge-red-bg': 'var(--theme-error-500, #ef4444)',\n  '--badge-red-text': '#ffffff',\n\n  '--badge-yellow-bg': 'var(--theme-warning-500, #eab308)',\n  '--badge-yellow-text': '#000000',\n\n  '--badge-blue-bg': 'var(--theme-elevation-500, #3b82f6)',\n  '--badge-blue-text': '#ffffff',\n\n  '--badge-green-bg': 'var(--theme-success-500, #22c55e)',\n  '--badge-green-text': '#ffffff',\n\n  '--badge-orange-bg': '#f97316',\n  '--badge-orange-text': '#ffffff',\n\n  '--badge-gray-bg': 'var(--theme-elevation-300, #6b7280)',\n  '--badge-gray-text': '#ffffff',\n}\n","import type { Config } from 'payload'\nimport type { CustomLink, CustomGroup } from '../types'\n\n/**\n * Serializable custom link (icon as string key)\n */\nexport interface SerializableCustomLink {\n  label: string\n  href: string\n  group?: string\n  icon?: string // Icon key instead of component\n  external?: boolean\n  pinnable?: boolean\n  order?: number\n}\n\n/**\n * Plugin options for Payload Sidebar\n */\nexport interface PayloadSidebarPluginOptions {\n  /**\n   * Custom group order - map of group name to priority (lower = higher)\n   */\n  groupOrder?: Record<string, number>\n\n  /**\n   * Custom icons for collections/globals by slug\n   * Use Lucide icon names (kebab-case): 'shield-check', 'file-text', etc.\n   * Full list: https://lucide.dev/icons\n   *\n   * @example\n   * ```ts\n   * icons: {\n   *   users: 'users',\n   *   posts: 'file-text',\n   *   media: 'image',\n   *   'my-collection': 'shield-check',\n   * }\n   * ```\n   */\n  icons?: Record<string, string>\n\n  /**\n   * Custom navigation links\n   * Add your own links to the sidebar navigation\n   * @example\n   * ```ts\n   * customLinks: [\n   *   { label: 'Analytics', href: '/admin/analytics', group: 'Tools', icon: 'chart' },\n   *   { label: 'API Docs', href: 'https://api.example.com/docs', external: true },\n   * ]\n   * ```\n   */\n  customLinks?: CustomLink[]\n\n  /**\n   * Custom navigation groups\n   * Define additional groups or configure existing ones\n   * @example\n   * ```ts\n   * customGroups: [\n   *   { label: 'Tools', order: 5 },\n   *   { label: 'External', order: 99, defaultOpen: false },\n   * ]\n   * ```\n   */\n  customGroups?: CustomGroup[]\n\n  /**\n   * Enable pinning functionality\n   * @default true\n   */\n  enablePinning?: boolean\n  /**\n   * Storage for pinned items: 'preferences' (server) or 'localStorage' (client)\n   * @default 'preferences'\n   */\n  pinnedStorage?: 'preferences' | 'localStorage'\n  /**\n   * CSS class prefix\n   * @default 'nav'\n   */\n  classPrefix?: string\n  /**\n   * Custom CSS variables for badge colors\n   */\n  cssVariables?: Record<string, string>\n}\n\n/**\n * Serializable version of plugin options (stored in config.custom)\n */\nexport interface SerializablePluginOptions {\n  groupOrder?: Record<string, number>\n  icons?: Record<string, string>\n  customLinks?: SerializableCustomLink[]\n  customGroups?: CustomGroup[]\n  enablePinning?: boolean\n  pinnedStorage?: 'preferences' | 'localStorage'\n  classPrefix?: string\n  cssVariables?: Record<string, string>\n}\n\n/**\n * Config key for storing plugin options\n */\nexport const PLUGIN_OPTIONS_KEY = 'payloadSidebarOptions'\n\n/**\n * Get the current plugin options from Payload config\n */\nexport const getPluginOptions = (config: Config): SerializablePluginOptions => {\n  return (config.custom?.[PLUGIN_OPTIONS_KEY] as SerializablePluginOptions) || {}\n}\n\n/**\n * Serialize CustomLink to SerializableCustomLink\n * Converts icon components to string keys\n */\nfunction serializeCustomLink(link: CustomLink): SerializableCustomLink {\n  let iconKey: string | undefined\n\n  if (link.icon) {\n    // If icon is a component, try to get its displayName or name\n    if (typeof link.icon === 'function') {\n      iconKey = (link.icon as { displayName?: string }).displayName || link.icon.name || 'custom'\n    } else {\n      iconKey = String(link.icon)\n    }\n  }\n\n  return {\n    label: link.label,\n    href: link.href,\n    group: link.group,\n    icon: iconKey,\n    external: link.external,\n    pinnable: link.pinnable,\n    order: link.order,\n  }\n}\n\n/**\n * Payload Sidebar Plugin\n *\n * A customizable navigation sidebar for Payload CMS 3.x with:\n * - Sortable navigation groups\n * - Custom icons for collections/globals\n * - Pin items to top\n * - Multi-color badge support\n *\n * @example\n * ```ts\n * import { payloadSidebar } from 'payload-sidebar-plugin'\n *\n * export default buildConfig({\n *   plugins: [\n *     payloadSidebar({\n *       groupOrder: {\n *         'Content': 1,\n *         'Users': 2,\n *         'Settings': 3,\n *       },\n *       enablePinning: true,\n *     }),\n *   ],\n * })\n * ```\n */\nexport const payloadSidebar = (options: PayloadSidebarPluginOptions = {}) => {\n  return (incomingConfig: Config): Config => {\n    const config = { ...incomingConfig }\n\n    // Ensure admin config exists\n    config.admin = config.admin || {}\n    config.admin.components = config.admin.components || {}\n\n    // Set custom Nav component using the bundled RSC export\n    config.admin.components.Nav = 'payload-sidebar-plugin/rsc#CustomNav'\n\n    // Serialize options and store in config.custom\n    // This allows RSC to access options via payload.config\n    const serializableOptions: SerializablePluginOptions = {\n      groupOrder: options.groupOrder,\n      icons: options.icons,\n      customLinks: options.customLinks?.map(serializeCustomLink),\n      customGroups: options.customGroups,\n      enablePinning: options.enablePinning,\n      pinnedStorage: options.pinnedStorage,\n      classPrefix: options.classPrefix,\n      cssVariables: options.cssVariables,\n    }\n\n    config.custom = config.custom || {}\n    config.custom[PLUGIN_OPTIONS_KEY] = serializableOptions\n\n    return config\n  }\n}\n\nexport default payloadSidebar\n"],"mappings":"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","names":[]}